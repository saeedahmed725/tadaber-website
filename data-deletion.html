<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="سياسة حذف البيانات - تطبيق تدبر للقرآن الكريم" />
    <title>حذف البيانات - تدبر</title>
    <!-- Favicon-->
    <link rel="icon" href="assets/app_logo.svg" />
    <!-- Bootstrap Icons-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet" />
    <!-- Google fonts for Arabic -->
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;700&family=Amiri:wght@400;700&display=swap" rel="stylesheet" />
    <!-- AOS CSS -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <!-- Core theme CSS -->
    <link href="css/styles.css" rel="stylesheet" />
    <!-- Custom CSS for data deletion page -->
    <style>
        body {
            font-family: 'Tajawal', sans-serif;
            direction: rtl;
            text-align: right;
        }

        .deletion-hero {
            background: linear-gradient(135deg, #0E6D5E 0%, #0a5147 100%);
            color: white;
            padding: 120px 0 80px;
            min-height: 60vh;
            display: flex;
            align-items: center;
        }

        .deletion-content {
            background: white;
            padding: 60px 0;
        }

        .policy-card {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }

        .policy-card:hover {
            transform: translateY(-5px);
        }

        .form-card {
            background: white;
            border-radius: 15px;
            padding: 40px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            border: 1px solid #e9ecef;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-label {
            font-weight: 600;
            color: #0E6D5E;
            margin-bottom: 8px;
            display: block;
        }

        .form-control {
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 12px 15px;
            font-size: 16px;
            transition: all 0.3s ease;
            direction: rtl;
            text-align: right;
        }

        .form-control:focus {
            border-color: #0E6D5E;
            box-shadow: 0 0 0 0.2rem rgba(14, 109, 94, 0.25);
        }

        .btn-submit {
            background: linear-gradient(135deg, #0E6D5E 0%, #0a5147 100%);
            border: none;
            color: white;
            padding: 15px 40px;
            border-radius: 50px;
            font-weight: 600;
            font-size: 18px;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .btn-submit:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(14, 109, 94, 0.3);
            color: white;
        }

        .back-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255,255,255,0.9);
            border: none;
            border-radius: 50px;
            padding: 12px 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            z-index: 1000;
            transition: all 0.3s ease;
            text-decoration: none;
            color: #0E6D5E;
            font-weight: 600;
        }

        .back-btn:hover {
            background: white;
            transform: translateY(-2px);
            color: #0E6D5E;
        }

        .icon-wrapper {
            background: rgba(14, 109, 94, 0.1);
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 30px;
        }

        .icon-wrapper i {
            font-size: 2.5rem;
            color: #0E6D5E;
        }

        .section-title {
            color: #0E6D5E;
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 20px;
        }

        .section-subtitle {
            font-size: 1.2rem;
            color: #6c757d;
            margin-bottom: 40px;
        }

        textarea.form-control {
            min-height: 120px;
            resize: vertical;
        }

        .alert-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
            display: none;
        }

        .loading {
            display: none;
        }

        .loading.show {
            display: inline-block;
        }

        /* RTL specific styles */
        .form-control::placeholder {
            text-align: right;
        }

        @media (max-width: 768px) {
            .deletion-hero {
                padding: 100px 0 60px;
            }
            
            .policy-card, .form-card {
                padding: 25px;
            }
            
            .section-title {
                font-size: 2rem;
            }
        }
    </style>
</head>

<body>
    <!-- Back to main site button -->
    <a href="index.html" class="back-btn" data-aos="fade-left">
        <i class="bi bi-arrow-right me-2"></i>
        العودة للموقع الرئيسي
    </a>

    <!-- Hero Section -->
    <section class="deletion-hero">
        <div class="container">
            <div class="row justify-content-center text-center">
                <div class="col-lg-8">
                    <div class="icon-wrapper" data-aos="zoom-in">
                        <i class="bi bi-shield-check"></i>
                    </div>
                    <h1 class="section-title" data-aos="fade-up" data-aos-delay="200">
                        سياسة حذف البيانات
                    </h1>
                    <p class="section-subtitle" data-aos="fade-up" data-aos-delay="300">
                        نحن نحترم خصوصيتك ونوفر لك إمكانية حذف بياناتك بسهولة
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Content Section -->
    <section class="deletion-content">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-10">
                    <!-- Policy Information -->
                    <div class="policy-card" data-aos="fade-up">
                        <div class="text-center mb-4">
                            <div class="icon-wrapper" style="width: 60px; height: 60px;">
                                <i class="bi bi-info-circle" style="font-size: 1.8rem;"></i>
                            </div>
                            <h3 style="color: #0E6D5E; font-weight: 700;">حول حذف البيانات</h3>
                        </div>
                        <p style="font-size: 1.1rem; line-height: 1.8; color: #495057; text-align: center;">
                            وفقاً لسياسات متجر جوجل بلاي وحرصاً منا على احترام خصوصية المستخدمين، نوفر لك إمكانية طلب حذف جميع البيانات المرتبطة بحسابك في تطبيق تدبر. 
                            يمكنك استخدام النموذج أدناه لإرسال طلب حذف البيانات، وسنقوم بمعالجة طلبك خلال 30 يوماً من تاريخ الاستلام.
                        </p>
                    </div>

                    <!-- Contact Form -->
                    <div class="form-card" data-aos="fade-up" data-aos-delay="200">
                        <div class="text-center mb-4">
                            <div class="icon-wrapper" style="width: 60px; height: 60px;">
                                <i class="bi bi-trash" style="font-size: 1.8rem;"></i>
                            </div>
                            <h3 style="color: #0E6D5E; font-weight: 700;">طلب حذف البيانات</h3>
                            <p style="color: #6c757d;">املأ النموذج أدناه وسنقوم بمعالجة طلبك في أقرب وقت</p>
                        </div>

                        <form id="deletionForm">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="fullName" class="form-label">الاسم الكامل *</label>
                                        <input type="text" class="form-control" id="fullName" name="fullName" 
                                               placeholder="اكتب اسمك الكامل" required>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="email" class="form-label">البريد الإلكتروني *</label>
                                        <input type="email" class="form-control" id="email" name="email" 
                                               placeholder="اكتب بريدك الإلكتروني" required>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="userId" class="form-label">معرف المستخدم *</label>
                                <input type="text" class="form-control" id="userId" name="userId" 
                                       placeholder="اكتب معرف المستخدم الخاص بك في التطبيق" required>
                                <small class="text-muted">يمكنك العثور على معرف المستخدم في إعدادات التطبيق</small>
                            </div>

                            <div class="form-group">
                                <label for="message" class="form-label">رسالة إضافية (اختيارية)</label>
                                <textarea class="form-control" id="message" name="message" 
                                          placeholder="أضف أي ملاحظات أو أسباب إضافية لطلب الحذف"></textarea>
                            </div>

                            <div class="text-center">
                                <button type="submit" class="btn-submit">
                                    <span class="btn-text">إرسال طلب الحذف</span>
                                    <span class="loading">
                                        <i class="bi bi-hourglass-split"></i>
                                        جاري الإرسال...
                                    </span>
                                </button>
                            </div>

                            <div class="alert-success" id="successAlert">
                                <i class="bi bi-check-circle me-2"></i>
                                تم إرسال طلبك بنجاح! سنقوم بمعالجة طلب حذف البيانات خلال 30 يوماً.
                            </div>
                        </form>
                    </div>

                    <!-- Additional Information -->
                    <div class="policy-card" data-aos="fade-up" data-aos-delay="400">
                        <div class="text-center mb-4">
                            <div class="icon-wrapper" style="width: 60px; height: 60px;">
                                <i class="bi bi-clock-history" style="font-size: 1.8rem;"></i>
                            </div>
                            <h3 style="color: #0E6D5E; font-weight: 700;">معلومات مهمة</h3>
                        </div>
                        <div class="row">
                            <div class="col-md-4 text-center mb-3">
                                <i class="bi bi-stopwatch" style="font-size: 2rem; color: #0E6D5E; margin-bottom: 10px;"></i>
                                <h5 style="color: #0E6D5E;">مدة المعالجة</h5>
                                <p>30 يوماً كحد أقصى</p>
                            </div>
                            <div class="col-md-4 text-center mb-3">
                                <i class="bi bi-database-x" style="font-size: 2rem; color: #0E6D5E; margin-bottom: 10px;"></i>
                                <h5 style="color: #0E6D5E;">البيانات المحذوفة</h5>
                                <p>جميع البيانات الشخصية</p>
                            </div>
                            <div class="col-md-4 text-center mb-3">
                                <i class="bi bi-envelope-check" style="font-size: 2rem; color: #0E6D5E; margin-bottom: 10px;"></i>
                                <h5 style="color: #0E6D5E;">تأكيد الحذف</h5>
                                <p>ستتلقى تأكيداً بالبريد</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Scripts -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        // Initialize AOS
        AOS.init({
            duration: 1000,
            easing: 'ease-in-out',
            once: true
        });        // Form handling
        document.getElementById('deletionForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const submitBtn = document.querySelector('.btn-submit');
            const btnText = document.querySelector('.btn-text');
            const loading = document.querySelector('.loading');
            const successAlert = document.getElementById('successAlert');
            
            // Show loading state
            btnText.style.display = 'none';
            loading.classList.add('show');
            submitBtn.disabled = true;
            
            // Get form data
            const formData = new FormData(this);
            const data = {
                fullName: formData.get('fullName'),
                email: formData.get('email'),
                userId: formData.get('userId'),
                message: formData.get('message') || ''
            };
            
            try {
                // Try to send via server API first
                const response = await fetch('/api/delete-request', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(data)
                });
                
                const result = await response.json();
                
                if (result.success) {
                    // Show success message
                    successAlert.innerHTML = `
                        <i class="bi bi-check-circle me-2"></i>
                        ${result.message}
                    `;
                    successAlert.style.display = 'block';
                    
                    // Reset form
                    this.reset();
                } else {
                    throw new Error(result.message);
                }
                
            } catch (error) {
                console.log('Server not available, falling back to mailto');
                
                // Fallback to mailto if server is not available
                const subject = encodeURIComponent('طلب حذف بيانات المستخدم - تطبيق تدبر');
                const body = encodeURIComponent(`
الاسم الكامل: ${data.fullName}
البريد الإلكتروني: ${data.email}
معرف المستخدم: ${data.userId}
رسالة إضافية: ${data.message || 'لا توجد رسالة إضافية'}

تاريخ الطلب: ${new Date().toLocaleDateString('ar-SA')}
                `);
                
                const mailtoLink = `mailto:tadabar.app@gmail.com?subject=${subject}&body=${body}`;
                
                // Try to open email client
                try {
                    window.location.href = mailtoLink;
                    
                    // Show success message for mailto
                    successAlert.innerHTML = `
                        <i class="bi bi-envelope me-2"></i>
                        تم فتح برنامج البريد الإلكتروني. يرجى إرسال الرسالة لإكمال طلبك.
                    `;
                    successAlert.style.display = 'block';
                    
                    // Reset form
                    this.reset();
                    
                } catch (mailtoError) {
                    // Show error message
                    successAlert.innerHTML = `
                        <i class="bi bi-exclamation-triangle me-2"></i>
                        حدث خطأ في إرسال الطلب. يرجى المراسلة مباشرة على: tadabar.app@gmail.com
                    `;
                    successAlert.className = 'alert alert-warning';
                    successAlert.style.display = 'block';
                }
            }
            
            // Reset button state
            btnText.style.display = 'inline';
            loading.classList.remove('show');
            submitBtn.disabled = false;
            
            // Scroll to success message
            successAlert.scrollIntoView({ behavior: 'smooth', block: 'center' });
        });

        // Add some interactive effects
        document.querySelectorAll('.policy-card, .form-card').forEach(card => {
            card.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-5px)';
            });
            
            card.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(0)';
            });
        });
    </script>
</body>

</html>
